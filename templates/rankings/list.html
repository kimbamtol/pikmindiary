{% extends 'base.html' %}

{% block title %}ë­í‚¹ - í”¼í¬ë¯¼ ë‹¤ì´ì–´ë¦¬{% endblock %}

{% block content %}
<div class="container">
    <div class="ranking-page">
        <h1 class="page-title">ğŸ† ë­í‚¹</h1>

        <!-- ê¸°ê°„ ì„ íƒ -->
        <div class="period-tabs">
            <a href="{% url 'rankings:list' %}" class="tab {% if period_type == 'ALL' %}active{% endif %}">ì „ì²´</a>
            <a href="{% url 'rankings:weekly' %}" class="tab {% if period_type == 'WEEKLY' %}active{% endif %}">ì£¼ê°„</a>
            <a href="{% url 'rankings:monthly' %}" class="tab {% if period_type == 'MONTHLY' %}active{% endif %}">ì›”ê°„</a>
        </div>

        <p class="period-label">{{ period_label }}</p>

        <!-- ì ìˆ˜ ì„¤ëª… -->
        <div class="score-info card">
            <h3>ğŸ“Š ì ìˆ˜ ê³„ì‚° ë°©ì‹</h3>
            <ul>
                <li>ìŠ¹ì¸ëœ ê¸€ ì‘ì„±: <strong>+10ì </strong></li>
                <li>ë°›ì€ ì¢‹ì•„ìš” (ì¢Œí‘œ): <strong>+5ì </strong></li>
                <li>ë°›ì€ ë³µì‚¬: <strong>+2ì </strong></li>
                <li>ğŸŒ± ë†ì‚¬ ì¼ì§€ ì¢‹ì•„ìš”: <strong>+10ì </strong></li>
            </ul>
            <div class="period-info">
                <p>ğŸ“… <strong>ì£¼ê°„</strong>: ë§¤ì£¼ ì›”ìš”ì¼ 00:00 ~ ì¼ìš”ì¼ 24:00</p>
                <p>ğŸ“… <strong>ì›”ê°„</strong>: ë§¤ì›” 1ì¼ 00:00 ~ ë§ì¼ 24:00</p>
            </div>
        </div>

        <!-- ë­í‚¹ ëª©ë¡ -->
        {% if rankings %}
        <div class="ranking-list">
            {% for ranking in rankings %}
            <div class="ranking-item card {% if forloop.counter <= 3 %}top-{{ forloop.counter }}{% endif %}">
                <div class="rank">
                    {% if forloop.counter == 1 %}
                    ğŸ¥‡
                    {% elif forloop.counter == 2 %}
                    ğŸ¥ˆ
                    {% elif forloop.counter == 3 %}
                    ğŸ¥‰
                    {% else %}
                    {{ ranking.rank }}
                    {% endif %}
                </div>
                <a href="{% url 'accounts:user_profile' user_id=ranking.user.pk %}" class="user-info">
                    <div class="avatar">
                        {% if ranking.user.profile_image %}
                        <img src="{{ ranking.user.profile_image.url }}" alt="{{ ranking.user.nickname }}">
                        {% else %}
                        <div class="avatar-placeholder">{{ ranking.user.nickname|slice:":1" }}</div>
                        {% endif %}
                    </div>
                    <span class="nickname">{{ ranking.user.nickname }}</span>
                </a>
                <div class="score">
                    <span class="score-value">{{ ranking.score }}</span>
                    <span class="score-label">ì </span>
                </div>
                <div class="score-detail">
                    <span title="ìŠ¹ì¸ëœ ê¸€">ğŸ“ {{ ranking.approved_posts_count }}</span>
                    <span title="ë°›ì€ ì¢‹ì•„ìš” (ì¢Œí‘œ)">â¤ï¸ {{ ranking.likes_received_count }}</span>
                    <span title="ë°›ì€ ë³µì‚¬">ğŸ“‹ {{ ranking.copy_received_count }}</span>
                    <span title="ë†ì‚¬ ì¢‹ì•„ìš”">ğŸŒ± {{ ranking.farming_likes_received_count }}</span>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">ğŸ†</div>
            <h2 class="empty-state-title">ì•„ì§ ë­í‚¹ì´ ì—†ìŠµë‹ˆë‹¤</h2>
            <p class="empty-state-desc">ì¢Œí‘œë¥¼ ì œë³´í•˜ê³  ì²« ë²ˆì§¸ ë­ì»¤ê°€ ë˜ì–´ë³´ì„¸ìš”!</p>
        </div>
        {% endif %}
    </div>
</div>

<style>
    .ranking-page {
        max-width: 800px;
        margin: var(--spacing-xl) auto;
        background: var(--bg-primary);
        padding: var(--spacing-xl);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-sm);
    }

    .page-title {
        text-align: center;
        margin-bottom: var(--spacing-lg);
        color: #1a1a1a;
    }

    .period-tabs {
        display: flex;
        justify-content: center;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-md);
        padding: var(--spacing-sm);
        background: var(--bg-primary);
        border-radius: var(--radius-full);
        width: fit-content;
        margin-left: auto;
        margin-right: auto;
    }

    .tab {
        padding: var(--spacing-sm) var(--spacing-xl);
        border-radius: var(--radius-full);
        color: var(--text-secondary);
        font-weight: 500;
    }

    .tab.active {
        background: var(--primary);
        color: white;
    }

    .period-label {
        text-align: center;
        color: var(--text-secondary);
        margin-bottom: var(--spacing-lg);
    }

    .score-info {
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-xl);
        background: var(--bg-secondary);
        border-radius: var(--radius-xl);
    }

    .score-info h3 {
        margin-bottom: var(--spacing-sm);
        font-size: 0.95rem;
    }

    .score-info ul {
        display: flex;
        gap: var(--spacing-lg);
        flex-wrap: wrap;
    }

    .score-info li {
        font-size: 0.9rem;
        color: var(--text-secondary);
    }

    .period-info {
        margin-top: var(--spacing-md);
        padding-top: var(--spacing-md);
        border-top: 1px dashed var(--bg-tertiary);
    }

    .period-info p {
        font-size: 0.85rem;
        color: var(--text-secondary);
        margin: var(--spacing-xs) 0;
    }

    .negative {
        color: #C62828;
    }

    .ranking-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .ranking-item {
        display: flex;
        align-items: center;
        gap: var(--spacing-md);
        padding: var(--spacing-md) var(--spacing-lg);
        border-radius: var(--radius-xl);
    }

    .ranking-item.top-1 {
        background: linear-gradient(135deg, #FFF9C4, #FFD54F);
        border: 2px solid #FFD54F;
        border-radius: var(--radius-xl);
    }

    .ranking-item.top-2 {
        background: linear-gradient(135deg, #F5F5F5, #E0E0E0);
        border: 2px solid #BDBDBD;
        border-radius: var(--radius-xl);
    }

    .ranking-item.top-3 {
        background: linear-gradient(135deg, #FFCCBC, #FFAB91);
        border: 2px solid #FF8A65;
        border-radius: var(--radius-xl);
    }

    .rank {
        font-size: 1.5rem;
        font-weight: 700;
        min-width: 50px;
        text-align: center;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        flex: 1;
        color: var(--text-primary);
    }

    .avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
    }

    .avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .avatar-placeholder {
        width: 100%;
        height: 100%;
        background: var(--primary);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
    }

    .nickname {
        font-weight: 600;
    }

    .score {
        text-align: right;
        min-width: 80px;
    }

    .score-value {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--primary);
    }

    .score-label {
        font-size: 0.85rem;
        color: var(--text-secondary);
    }

    .score-detail {
        display: flex;
        gap: var(--spacing-sm);
        font-size: 0.85rem;
        color: var(--text-secondary);
    }

    @media (max-width: 600px) {
        .ranking-item {
            flex-wrap: wrap;
        }

        .score-detail {
            width: 100%;
            margin-top: var(--spacing-sm);
            justify-content: flex-end;
        }
    }
</style>
{% endblock %}