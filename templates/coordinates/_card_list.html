{% load i18n %}
{% load translate_content %}
{% for coord in coords %}
<article class="card coord-card">
    <a href="{% url 'coordinates:detail' pk=coord.pk %}">
        <div class="coord-card-image">
            {% if coord.images.first %}
            <img src="{{ coord.images.first.image.url }}" alt="{{ coord|translate_field:"title" }}">
            {% else %}
            <div class="coord-card-placeholder">ğŸ—ºï¸</div>
            {% endif %}
            <span class="badge badge-primary coord-card-category">
                {{ coord.get_category_display }}
            </span>
        </div>

        <div class="coord-card-content">
            <h3 class="coord-card-title">{{ coord|translate_field:"title" }}</h3>
            {% if coord.postcard_name %}
            <div class="coord-card-postcard">ğŸ·ï¸ {{ coord|translate_field:"postcard_name" }}</div>
            {% endif %}
            <div class="coord-card-meta">
                <span>ğŸ“ {{ coord.latitude }}, {{ coord.longitude }}</span>
                <span class="coord-region">{{ coord.get_region_display }}</span>
            </div>
            <div class="coord-card-meta">
                <span class="author-badge {{ coord.author.get_badge_class }}">
                    {% if coord.author.profile_emoji %}
                        <span class="profile-emoji">{{ coord.author.profile_emoji }}</span>
                    {% endif %}
                    <span class="author-name">{{ coord.author.nickname|default:_("ìµëª…") }}</span>
                    {% if coord.author.special_title %}
                    <span class="special-title-tag">{{ coord.author.get_special_title_display }}</span>
                    {% endif %}
                </span>
            </div>
        </div>
    </a>

    <div class="coord-card-stats">
        <button type="button" class="copy-btn" data-coords="{{ coord.latitude }}, {{ coord.longitude }}"
            data-pk="{{ coord.pk }}" title="ì¢Œí‘œ ë³µì‚¬">ğŸ“‹ <span class="copy-count">{{ coord.copy_count }}</span></button>
        <span class="coord-stat">ğŸ‘ï¸ {{ coord.view_count }}</span>
        <span class="coord-stat">â¤ï¸ {{ coord.like_count }}</span>
        <span class="coord-stat">â­ {{ coord.bookmark_count }}</span>
        <span class="coord-stat">ğŸ’¬ {{ coord.comment_count }}</span>
    </div>
</article>
{% endfor %}