{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "ë‚´ ê±´ì˜ì‚¬í•­" %} - {% trans "í”¼í¬ë¯¼ ë‹¤ì´ì–´ë¦¬" %}{% endblock %}

{% block content %}
<div class="container">
    <div class="suggestions-page">
        <a href="{% url 'accounts:my_page' %}" class="back-link">â† {% trans "ë§ˆì´í˜ì´ì§€ë¡œ" %}</a>

        <h1 class="page-title">ğŸ“‹ {% trans "ë‚´ ê±´ì˜ì‚¬í•­" %}</h1>

        {% if page_obj %}
        <div class="suggestions-list">
            {% for suggestion in page_obj %}
            <div class="suggestion-card card">
                <div class="suggestion-header">
                    <span class="suggestion-category badge badge-secondary">{{ suggestion.get_category_display }}</span>
                    <span class="suggestion-status 
                        {% if suggestion.status == 'RESOLVED' %}badge-success
                        {% elif suggestion.status == 'REVIEWED' %}badge-warning
                        {% else %}badge-secondary{% endif %} badge">
                        {{ suggestion.get_status_display }}
                    </span>
                    <span class="suggestion-date">{{ suggestion.created_at|date:"Y.m.d H:i" }}</span>
                </div>

                <h3 class="suggestion-title">{{ suggestion.title }}</h3>
                <p class="suggestion-content">{{ suggestion.content|linebreaksbr }}</p>

                {% if suggestion.admin_reply %}
                <div class="admin-reply">
                    <div class="reply-header">
                        <span class="reply-icon">ğŸ’¬</span>
                        <span class="reply-label">{% trans "ìš´ì˜ì ë‹µë³€" %}</span>
                        <span class="reply-date">{{ suggestion.replied_at|date:"Y.m.d H:i" }}</span>
                    </div>
                    <p class="reply-content">{{ suggestion.admin_reply|linebreaksbr }}</p>
                </div>
                {% else %}
                <div class="no-reply">
                    <span>â³ {% trans "ì•„ì§ ë‹µë³€ì´ ì—†ìŠµë‹ˆë‹¤" %}</span>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>

        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary">â† {% trans "ì´ì „" %}</a>
            {% endif %}
            <span class="page-info">{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary">{% trans "ë‹¤ìŒ" %} â†’</a>
            {% endif %}
        </div>
        {% endif %}

        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">ğŸ“­</div>
            <h2 class="empty-state-title">{% trans "ê±´ì˜ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤" %}</h2>
            <p class="empty-state-desc">{% trans "ìš´ì˜ìì—ê²Œ ê±´ì˜í•  ë‚´ìš©ì´ ìˆë‹¤ë©´ ê±´ì˜í•˜ê¸° í˜ì´ì§€ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”." %}</p>
            <a href="{% url 'core:suggestion_form' %}" class="btn btn-primary">{% trans "ê±´ì˜í•˜ê¸°" %}</a>
        </div>
        {% endif %}
    </div>
</div>

<style>
    .suggestions-page {
        max-width: 800px;
        margin: var(--spacing-xl) auto;
    }

    .back-link {
        display: inline-block;
        margin-bottom: var(--spacing-md);
        color: var(--text-secondary);
    }

    .page-title {
        margin-bottom: var(--spacing-xl);
    }

    .suggestions-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-lg);
    }

    .suggestion-card {
        padding: var(--spacing-lg);
    }

    .suggestion-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        margin-bottom: var(--spacing-md);
    }

    .suggestion-date {
        font-size: 0.85rem;
        color: var(--text-secondary);
        margin-left: auto;
    }

    .suggestion-title {
        font-size: 1.1rem;
        margin-bottom: var(--spacing-sm);
    }

    .suggestion-content {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: var(--spacing-lg);
    }

    .admin-reply {
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        padding: var(--spacing-md);
        border-left: 3px solid var(--primary);
    }

    .reply-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        margin-bottom: var(--spacing-sm);
    }

    .reply-icon {
        font-size: 1.2rem;
    }

    .reply-label {
        font-weight: 600;
        color: var(--primary);
    }

    .reply-date {
        font-size: 0.8rem;
        color: var(--text-secondary);
        margin-left: auto;
    }

    .reply-content {
        line-height: 1.6;
    }

    .no-reply {
        text-align: center;
        padding: var(--spacing-md);
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
    }

    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: var(--spacing-md);
        margin-top: var(--spacing-xl);
    }

    .page-info {
        color: var(--text-secondary);
    }

    .badge-success {
        background-color: #28a745;
        color: white;
    }

    .badge-warning {
        background-color: #ffc107;
        color: #212529;
    }
</style>
{% endblock %}