{% extends 'base.html' %}
{% load i18n %}
{% load translate_content %}

{% block title %}{% trans "ë†ì‚¬ ì¼ì§€ ì‚­ì œ" %} - {% trans "í”¼í¬ë¯¼ ë‹¤ì´ì–´ë¦¬" %}{% endblock %}

{% block content %}
<div class="container">
    <div class="confirm-page">
        <h1 class="page-title">ğŸ—‘ï¸ {% trans "ë†ì‚¬ ì¼ì§€ ì‚­ì œ" %}</h1>

        <div class="confirm-box">
            <div class="journal-preview">
                <h2>{{ journal|translate_field:"title" }}</h2>
                <p class="meta">
                    <span>ğŸŒ¸ {{ journal.flower_type|default:_("ê½ƒ") }}</span>
                    <span>ğŸ“ {{ journal.location_name|default:_("ìœ„ì¹˜ ë¯¸ì…ë ¥") }}</span>
                </p>
                <p class="content-preview">{{ journal|translate_field:"content"|truncatewords:30 }}</p>
            </div>

            <div class="warning-text">
                <p>âš ï¸ {% trans "ì •ë§ë¡œ ì´ ë†ì‚¬ ì¼ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?" %}</p>
                <p>{% trans "ì‚­ì œëœ ì¼ì§€ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." %}</p>
            </div>

            <form method="post" class="delete-form">
                {% csrf_token %}

                <!-- ë¹„íšŒì› ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ -->
                {% if not can_delete and journal.guest_password %}
                <div class="password-notice">
                    <p>ğŸ”’ {% trans "ë¹„íšŒì› ê¸€ì…ë‹ˆë‹¤. ì‘ì„± ì‹œ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." %}</p>
                </div>
                <div class="form-group">
                    <label class="form-label">{% trans "ë¹„ë°€ë²ˆí˜¸" %} *</label>
                    <input type="password" name="password" class="form-control" required>
                </div>
                {% endif %}

                <div class="form-actions">
                    <a href="{% url 'farming:journal_detail' pk=journal.pk %}" class="btn btn-outline">{% trans "ì·¨ì†Œ" %}</a>
                    <button type="submit" class="btn btn-danger">{% trans "ì‚­ì œí•˜ê¸°" %}</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .confirm-page {
        max-width: 500px;
        margin: var(--spacing-xl) auto;
        padding: var(--spacing-xl);
        background: var(--bg-primary);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-md);
    }

    .page-title {
        text-align: center;
        margin-bottom: var(--spacing-xl);
        color: #C62828;
    }

    .journal-preview {
        padding: var(--spacing-lg);
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-lg);
    }

    .journal-preview h2 {
        font-size: 1.2rem;
        margin-bottom: var(--spacing-sm);
    }

    .journal-preview .meta {
        font-size: 0.9rem;
        color: var(--text-secondary);
        display: flex;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-sm);
    }

    .journal-preview .content-preview {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }

    .warning-text {
        text-align: center;
        padding: var(--spacing-lg);
        background: #FFEBEE;
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-lg);
    }

    .warning-text p {
        color: #C62828;
        margin: var(--spacing-xs) 0;
    }

    .password-notice {
        padding: var(--spacing-md);
        background: #E3F2FD;
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-lg);
        color: #1565C0;
    }

    .form-group {
        margin-bottom: var(--spacing-lg);
    }

    .form-label {
        display: block;
        margin-bottom: var(--spacing-sm);
        font-weight: 600;
    }

    .form-actions {
        display: flex;
        justify-content: space-between;
        gap: var(--spacing-md);
    }
</style>
{% endblock %}